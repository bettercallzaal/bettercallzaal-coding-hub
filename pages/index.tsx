import { useState, useMemo } from 'react'\nimport Head from 'next/head'\nimport { GetStaticProps } from 'next'\nimport fs from 'fs'\nimport path from 'path'\n\ninterface Project {\n  name: string\n  description: string\n  url: string\n  language: string\n  status: string\n}\n\ninterface PageProps {\n  projects: Project[]\n}\n\nconst LANGUAGES = ['TypeScript', 'HTML', 'JavaScript', 'Python', 'Solidity', 'Other']\n\nexport default function Home({ projects }: PageProps) {\n  const [searchQuery, setSearchQuery] = useState('')\n  const [selectedLanguage, setSelectedLanguage] = useState<string | null>(null)\n\n  const filteredProjects = useMemo(() => {\n    return projects.filter((project) => {\n      const matchesSearch =\n        project.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        project.description.toLowerCase().includes(searchQuery.toLowerCase())\n\n      const matchesLanguage = selectedLanguage ? project.language === selectedLanguage : true\n\n      return matchesSearch && matchesLanguage\n    })\n  }, [searchQuery, selectedLanguage])\n\n  return (\n    <>\n      <Head>\n        <title>Zaal's Coding Hub</title>\n        <meta name=\"description\" content=\"Projects by @bettercallzaal\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n      </Head>\n\n      <main className=\"min-h-screen bg-gray-900 text-white\">\n        <div className=\"mx-auto max-w-7xl px-6 py-12\">\n          {/* Header */}\n          <div className=\"mb-12\">\n            <h1 className=\"mb-2 text-4xl font-bold\">Zaal&apos;s Coding Hub</h1>\n            <p className=\"text-gray-400\">All projects • Web3 • Creator Infrastructure • Governance • IRL Activations</p>\n          </div>\n\n          {/* Stats */}\n          <div className=\"mb-8 flex gap-6 rounded-lg bg-gray-800 p-6\">\n            <div>\n              <p className=\"text-2xl font-bold text-blue-400\">{projects.length}</p>\n              <p className=\"text-sm text-gray-400\">Projects</p>\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-green-400\">{filteredProjects.length}</p>\n              <p className=\"text-sm text-gray-400\">Matches</p>\n            </div>\n          </div>\n\n          {/* Search */}\n          <div className=\"mb-8\">\n            <input\n              type=\"text\"\n              placeholder=\"Search projects...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full rounded-lg bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n\n          {/* Language Filter */}\n          <div className=\"mb-8 flex flex-wrap gap-2\">\n            <button\n              onClick={() => setSelectedLanguage(null)}\n              className={`rounded-full px-4 py-2 font-medium transition ${\n                selectedLanguage === null\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              All\n            </button>\n            {LANGUAGES.map((lang) => (\n              <button\n                key={lang}\n                onClick={() => setSelectedLanguage(lang)}\n                className={`rounded-full px-4 py-2 font-medium transition ${\n                  selectedLanguage === lang\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n                }`}\n              >\n                {lang}\n              </button>\n            ))}\n          </div>\n\n          {/* Projects Grid */}\n          <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {filteredProjects.map((project) => (\n              <div\n                key={project.name}\n                className=\"rounded-lg border border-gray-700 bg-gray-800 p-6 hover:border-blue-500 hover:bg-gray-750 transition\"\n              >\n                <div className=\"mb-3 flex items-start justify-between\">\n                  <h3 className=\"text-lg font-bold text-white\">{project.name}</h3>\n                  <span className=\"rounded bg-gray-700 px-2 py-1 text-xs text-gray-300\">\n                    {project.language}\n                  </span>\n                </div>\n                <p className=\"mb-4 min-h-[2.5rem] text-sm text-gray-400\">{project.description}</p>\n                <a\n                  href={project.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-block text-blue-400 hover:text-blue-300 text-sm font-medium\"\n                >\n                  View on GitHub →\n                </a>\n              </div>\n            ))}\n          </div>\n\n          {filteredProjects.length === 0 && (\n            <div className=\"py-12 text-center text-gray-500\">\n              No projects found. Try adjusting your search or filters.\n            </div>\n          )}\n        </div>\n      </main>\n    </>\n  )\n}\n\nexport const getStaticProps: GetStaticProps<PageProps> = async () => {\n  const projectsPath = path.join(process.cwd(), 'public', 'projects.json')\n  const projectsData = JSON.parse(fs.readFileSync(projectsPath, 'utf-8'))\n\n  return {\n    props: {\n      projects: projectsData.projects || [],\n    },\n    revalidate: 3600,\n  }\n}\n